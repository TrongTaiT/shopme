<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments :: page_head('Reset Password')"></head>

<body>
	<div th:replace="navigation :: header_menu"></div>

	<div class="container text-center">
		<div>&nbsp;</div>
		<div>
			<h1>Reset Your Password</h1>
		</div>

		<form th:action="@{/reset_password}" method="post" class="mx-auto" style="max-width: 420px;">
			<input type="hidden" th:value="${token}" name="token">
			<div th:if="${error != null}">
				<p class="text-danger">[[${error}]]</p>
			</div>
			<div th:if="${message != null}">
				<p class="text-warning">[[${message}]]</p>
			</div>

			<div class="border border-secondary rounded p-3">
				<div>
					<p>
						<input type="password" id="password" name="password" placeholder="Enter your new password" required autofocus
							minlength="8" maxlength="15" class="form-control">
					</p>
				</div>
				<div>
					<p>
						<input type="password" placeholder="Confirm your new password" required
							minlength="8" maxlength="15" class="form-control" oninput="checkPasswordMatch(this);">
					</p>
				</div>
				<div>
					<p>
						<input type="submit" value="Change Password" class="btn btn-primary">
					</p>
				</div>
			</div>
		</form>

		<div>&nbsp;</div>

	</div>

	<div th:replace="navigation :: footer_menu"></div>

	<script>
		function checkPasswordMatch(confirmPassword) {
			if (confirmPassword.value != $("#password").val()) {
				confirmPassword.setCustomValidity("Passwords do not match!");
			}
			else {
				confirmPassword.setCustomValidity("");
			}
		}
	</script>
</body>

</html>